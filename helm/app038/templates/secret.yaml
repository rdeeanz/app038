{{- if .Values.secrets.create }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "app038.fullname" . }}-secrets
  labels:
    {{- include "app038.labels" . | nindent 4 }}
type: Opaque
data:
  {{- if .Values.secrets.dbPassword }}
  DB_PASSWORD: {{ .Values.secrets.dbPassword | b64enc }}
  {{- end }}
  {{- if .Values.secrets.redisPassword }}
  REDIS_PASSWORD: {{ .Values.secrets.redisPassword | b64enc }}
  redis-password: {{ .Values.secrets.redisPassword | b64enc }}
  {{- end }}
  {{- if .Values.secrets.rabbitmqPassword }}
  RABBITMQ_PASSWORD: {{ .Values.secrets.rabbitmqPassword | b64enc }}
  rabbitmq-password: {{ .Values.secrets.rabbitmqPassword | b64enc }}
  {{- end }}
  {{- if .Values.secrets.appKey }}
  APP_KEY: {{ .Values.secrets.appKey | b64enc }}
  {{- end }}
  {{- if .Values.secrets.rabbitmqUsername }}
  rabbitmq-username: {{ .Values.secrets.rabbitmqUsername | b64enc }}
  {{- end }}
stringData:
  DB_HOST: {{ .Values.secrets.dbHost | quote }}
  DB_PORT: {{ .Values.secrets.dbPort | quote }}
  DB_DATABASE: {{ .Values.secrets.dbDatabase | quote }}
  DB_USERNAME: {{ .Values.secrets.dbUsername | quote }}
  {{- if not .Values.secrets.dbPassword }}
  DB_PASSWORD: ""
  {{- end }}
  REDIS_HOST: {{ include "app038.fullname" . }}-redis
  REDIS_PORT: "6379"
  {{- if not .Values.secrets.redisPassword }}
  REDIS_PASSWORD: ""
  {{- end }}
  RABBITMQ_HOST: {{ include "app038.fullname" . }}-rabbitmq
  RABBITMQ_PORT: "5672"
  RABBITMQ_USERNAME: {{ .Values.secrets.rabbitmqUsername | default "rabbitmq" | quote }}
  {{- if not .Values.secrets.rabbitmqPassword }}
  RABBITMQ_PASSWORD: ""
  {{- end }}
  {{- if not .Values.secrets.appKey }}
  APP_KEY: ""
  {{- end }}
{{- end }}

